% -----------------------------------------------------------------------------
\section{Description of outputs}
The results generated by the OpenQuake-engine are fundamentally 
of two distinct typologies differentiated by the presence (or 
absence) of epistemic uncertainty in the PSHA input model.

When epistemic uncertainty is incorporated into the 
calculation, the Open\-Quake\--engine calculators (e.g. Classical 
PSHA, Event Based PSHA, Disaggregation, UHS) produce a 
'distribution' of results (hazard curves, ground motion fields, 
disaggregation matrices, UHS) which is specular to the epistemic 
uncertainties introduced in the PSHA input model.

For each logic tree sample, results are computed and stored. 
Calculation of results statistics (mean, standard deviation, 
quantiles) are included in the hazard module of the 
OpenQuake-engine calculators (the only exception being 
disaggregation).
% - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
\subsection{Output from Classical PSHA}
By default, the classical PSHA calculator computes and stores 
hazard curves for each logic tree sample.

When the PSHA input model doesn't contain epistemic uncertainties
the results will consist on a set of hazard curves (one for each 
investigated site). 
\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\small]
user@ubuntu:~$ openquake --lho <calc_id>
id | output_type | name
\textcolor{red}{3 | hazard_curve | hc-rlz-6}
\end{Verbatim}

If \texttt{number\_of\_logic\_tree\_samples}, then N hazard curves 
files are generated:
\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\small]
user@ubuntu:~$ openquake --lho <calc_id>
id | output_type | name
\textcolor{red}{5 | hazard_curve | hc-rlz-10}
\textcolor{red}{6 | hazard_curve | hc-rlz-7}
\textcolor{red}{7 | hazard_curve | hc-rlz-8}
\textcolor{red}{8 | hazard_curve | hc-rlz-9}
\textcolor{red}{9 | hazard_curve | hc-rlz-11}
\textcolor{red}{10 | hazard_curve | hc-rlz-12}
\end{Verbatim}
If we export from the database the hazard curves contained in 
one of the items above through this command below
\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\small]
user@ubuntu:~$ openquake --eh <output_id> <output_directory>
\end{Verbatim}
we will obtain a nrml formatted file as represented in the example
above.
\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\small]
<?xml version='1.0' encoding='UTF-8'?>
<nrml xmlns:gml="http://www.opengis.net/gml" 
      xmlns="http://openquake.org/xmlns/nrml/0.4">
  <hazardCurves \textcolor{red}{sourceModelTreePath="b1|b212"} 
      \textcolor{red}{gsimTreePath="b2" IMT="PGA" investigationTime="50.0"}>
    \textcolor{green}{<IMLs>0.005 0.007 0.0098 ... 1.09 1.52 2.13</IMLs>}
    <hazardCurve>
      <gml:Point>
      \textcolor{blue}{<gml:pos>10.0 45.0</gml:pos>}
      </gml:Point>
      <poEs>1.0 1.0 1.0 ... 0.000688359310522 0.0 0.0</poEs>
    </hazardCurve>
    ...
    <hazardCurve>
      <gml:Point>
      \textcolor{blue}{<gml:pos>lon lat</gml:pos>}
      </gml:Point>
      <poEs>poe1 poe2 ... poeN</poEs>
    </hazardCurve>
  </hazardCurves>
</nrml>
\end{Verbatim}
Notwithstanding the intuitiveness of this file, let's have a brief 
overview of the information included.

The overall content of this file is a list of hazard curves, one for
each investigated site, computed using a PSHA input model which 
can be either the single PSHA input model (if epistemic 
uncertainties are not accounted) or one possible realisation of 
the complete logic tree structure. 

The attributes of the \texttt{hazardCurves} element (see text in 
red in the example file above) specify the path used to create the 
seismic source model (\texttt{source\-Model\-TreePath}) and the ground
motion model (\texttt{gsim\-Tree\-Path}) plus the intensity measure type 
and the investigation time used to compute the probability of exceedance. 
The \texttt{IMLs} element (in green in the example above) contains the 
values of shaking for which OpenQuake computed the probability of 
exceedance in the investigation time.
For each site this file contains a \texttt{hazardCurve} element which 
includes the coordinates (longitude and latitude in decimal degrees) 
of the site and the values of the probability of exceedance for all the 
intensity measure levels specified in the \texttt{IMLs} element.

If together with hazard curves the calculation of hazard curves have 
been selected in the configuration file this is the kind of output
we should expect from OpenQuake:
\begin{Verbatim}[frame=single, commandchars=\\\{\}, fontsize=\small]
user@ubuntu:~$ openquake --lho <calc_id> 
id | output_type | name
17 | hazard_curve | hc-rlz-17
18 | hazard_curve | hc-rlz-18
19 | hazard_curve | hc-rlz-13
20 | hazard_curve | hc-rlz-14
21 | hazard_curve | hc-rlz-15
22 | hazard_curve | hc-rlz-16
23 | hazard_curve | quantile(0.5)-curves-PGA
24 | hazard_map | hazard-map(0.1)-PGA-rlz-17
25 | hazard_map | hazard-map(0.1)-PGA-rlz-18
26 | hazard_map | hazard-map(0.1)-PGA-rlz-13
27 | hazard_map | hazard-map(0.1)-PGA-rlz-14
28 | hazard_map | hazard-map(0.1)-PGA-rlz-15
29 | hazard_map | hazard-map(0.1)-PGA-rlz-16
30 | hazard_map | hazard-map(0.1)-PGA-quantile(0.5)
\end{Verbatim}

